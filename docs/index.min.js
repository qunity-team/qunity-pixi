!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("qunity-pixi"),require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","qunity-pixi","pixi.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["project-sample"]={},t["qunity-pixi"],t.PIXI)}(this,function(t,e,i){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=a(i),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function s(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var n,p=(s(h,n=e.Component),h.prototype.start=function(){for(var t=this,e=this.starTexture,i=this.starAmount,a=this.stars=[],r=0;r<i;r++){var s={sprite:new o.default.Sprite(e),z:0,x:0,y:0};s.sprite.anchor.x=.5,s.sprite.anchor.y=.7,this.randomizeStar(s,!0),this.entity.addChild(s.sprite),a.push(s)}setInterval(function(){t.warpSpeed=0<t.warpSpeed?0:.05},5e3)},h.prototype.update=function(t){var e=this.entity.stageSize,i=e.width,a=e.height;this.speed+=(this.warpSpeed-this.speed)/20,this.cameraZ+=10*t*(this.speed+this.baseSpeed);for(var r=0;r<this.starAmount;r++){var s=this.stars[r];s.z<this.cameraZ&&this.randomizeStar(s);var o=s.z-this.cameraZ;s.sprite.x=s.x*(this.fov/o)*i+i/2,s.sprite.y=s.y*(this.fov/o)*i+a/2;var n=s.sprite.x-i/2,p=s.sprite.y-a/2,h=Math.sqrt(n*n+p*p),c=Math.max(0,(2e3-o)/2e3);s.sprite.scale.x=c*this.starBaseSize,s.sprite.scale.y=c*this.starBaseSize+c*this.speed*this.starStretch*h/i,s.sprite.rotation=Math.atan2(p,n)+Math.PI/2}},h.prototype.randomizeStar=function(t,e){t.z=e?2e3*Math.random():this.cameraZ+1e3*Math.random()+2e3;var i=Math.random()*Math.PI*2,a=50*Math.random()+1;t.x=Math.cos(i)*a,t.y=Math.sin(i)*a},h);function h(){var t=null!==n&&n.apply(this,arguments)||this;return t.starAmount=1e3,t.cameraZ=0,t.fov=20,t.baseSpeed=.005,t.speed=0,t.warpSpeed=0,t.starStretch=50,t.starBaseSize=.1,t}var c,u=(s(f,c=e.Component),f.prototype.awake=function(){},f.prototype.start=function(){this.label.text=this.text},f.prototype.update=function(t){this.t+=t,this.sprite.alpha=Math.abs(Math.sin(this.t/500))+.2,this.label.text=this.text+(0<Math.sin(this.t/100)?"_":"  ")},f);function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.t=0,t.i=0,t}var l=e.createApp();l.registerComponentDefs({"2b6d762d-a7ae-4f54-a21e-18ac13721b03":p,"/scripts/Background":p,"dcc5e287-7c96-436e-9efe-5c163d9e96a7":u,"/scripts/Hello":u}),t.launch=function(){console.log("launch"),l.launch(null,function(t,e){console.log("loading:",t/e)},function(){console.log("launch complete")})},Object.defineProperty(t,"__esModule",{value:!0})});
